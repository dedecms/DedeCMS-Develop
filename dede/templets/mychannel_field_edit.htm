<!--
- @founder   IT柏拉图, https: //weibo.com/itprato
- @author    DedeCMS团队
- @copyright Copyright (c) 2007 - 2021, 上海卓卓网络科技有限公司 (DesDev, Inc.)
--->

<html><head><meta charset="{dede:global.cfg_soft_lang/}" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>修改内容类型字段</title><meta name="copyright" content="2007-2021 DedeCMS, 上海卓卓网络科技有限公司 (DesDev, Inc.)" /><link rel="icon" href="/favicon.ico" /><!-- CSS FILES --><link rel="stylesheet" type="text/css" href="{dede:global.cfg_assets_dir/}/pkg/uikit/css/uikit.min.css" /><link rel="stylesheet" type="text/css" href="{dede:global.cfg_assets_dir/}/css/manage.dede.css"><style type="text/css">.uk-table td{padding: 6px 12px;vertical-align: top;height: 35px;}</style></head><body><!-- 列表头部 --><div id="Table_Header_202X2W2X1X292F" class="uk-card uk-card-small uk-card-default" uk-sticky="bottom: #offset"><div id="Header_1W2T2S2T1V252B" class="uk-card-header"><div class="uk-grid uk-grid-small uk-text-small"><span><ul class="uk-breadcrumb"><li><a href="mychannel_main.php">内容类型管理</a> </li><li><a href="mychannel_edit.php?id=<?php echo $id?>&dopost=edit">当前内容类型</a> </li><li><span>修改内容类型字段</span></li></ul></span></div></div></div><!-- /列表头部 --><!-- 列表主体 --><div class="uk-card uk-card-small uk-card-default" style="top:-20px;margin-bottom: 50px;"><div class="uk-card-body uk-overflow-auto" grid><div class="uk-child-width-1-1 uk-padding"><table width="98%" border="0" cellpadding="1" cellspacing="1" class="uk-table"><form name="form1" action="mychannel_field_edit.php" method="post" onSubmit="return GetFields();"><input type='hidden' name='action' value='save' /><input type='hidden' name='id' value='<?php echo $id?>' /><input type='hidden' name='fname' value='<?php echo $fname?>' /><input type='hidden' name='issystem' value='<?php echo $issystem?>' /><input type='hidden' name='fieldstring' value='' /><!-- 选项 --><?php if($row['issystem']==1){ ?><tr><td colspan="2"><span class="STYLE1">您当前操作的字段属于系统模型字段：修改系统模型有风险，请不要随便改动系统模型的字段相关的属性。</span> </td></tr><?php } ?><tr><td><strong>表单提示文字：</strong><br><span class="STYLE2">发布内容时显示的提示文字</span></td><td><input name="itemname" type="text" class="uk-input uk-form-small uk-form-width-large" id="itemname" value="<?php echo $ctag->GetAtt('itemname')?>" class="pubinputs">*（发布内容时显示的项名字） </td></tr><tr><td width="28%"><strong>字段名称：</strong><br><span class="STYLE2">只能用英文字母或数字，数据表的真实字段名</span></td><td width="72%" style="table-layout:fixed;word-break:break-all"><?php echo $fname?> </td></tr><tr><td><strong>字段类型：</strong></td><td><input name="autofield" type="radio" class="uk-radio" value="1" checked="checked"<?php echo ($ctag->GetAtt('autofield')==1 ? " checked":""); ?>/>系统自动生成表单字段 &nbsp;&nbsp;<input name="autofield" type="radio" class="uk-radio" value="0"<?php echo ( ($ctag->GetAtt('autofield')==''||$ctag->GetAtt('autofield')=='0') ? " checked":""); ?>/>已经固化在发布表单中字段 </td></tr><tr><td><strong>前台参数：</strong></td><td><input name="islist" type="checkbox" class="uk-checkbox" id="islist" value="1"<?php echo ($ctag->GetAtt('islist')==1 ? " checked":""); ?>/>使字段可以在列表的底层模板中获得(自定义字段默认仅能在文档模板显示，启用此选项将使列表查询变慢，如无必要请不要选择)<br /><input name="notsend" type="checkbox" class="uk-checkbox" id="notsend" value="1"<?php echo ($ctag->GetAtt('notsend')==1 ? " checked":""); ?>/>前台投稿及采集规则禁用本字段 </td></tr><tr><td><strong>数据类型：</strong></td><td><select name="dtype" id="type" class="uk-select uk-form-small uk-form-width-medium"><?php$dtype = $ctag->GetAtt('type');if($dtype!='' && isset($fieldtypes[$dtype])){echo "<option value='{$dtype}'>{$fieldtypes[$dtype]}</option>\r\n";$canchange = true;}else{echo "<option value='{$dtype}'>系统专用类型</option>\r\n";$canchange = false;}if($canchange){?><option value="text">单行文本(varchar)</option><option value="textchar">单行文本(char)</option><option value="multitext">多行文本</option><option value="htmltext">HTML文本</option><option value="textdata">文本保存HTML数据</option><option value="int">整数类型</option><option value="float">小数类型</option><option value="datetime">时间类型</option><option value="img">图片</option><option value="imgfile">图片(仅网址)</option><option value="media">多媒体文件</option><option value="addon">附件类型</option><option value="select">使用option下拉框</option><option value="radio">使用radio选项卡</option><option value="checkbox">Checkbox多选框</option><option value="stepselect">联动类型</option><?php}?></select> </td></tr><tr><td><strong>内容是否需要分页符：</strong><br/><span class="STYLE2">如果内容需要分页符，不论何种内容，都可以用#P#副标题#e#作为分页符号实现内容分页，但一个模型里仅允许一个这样的字段!</span></td><td><input name="isnull" type="hidden" value="1" /><input name="spage" type="radio" class="uk-radio" value="split"<?php if($ctag->GetAtt('page')=='split') echo " checked='1' "; ?> class='np' />是 &nbsp;<input name="spage" type="radio" class="uk-radio" value="no"<?php if($ctag->GetAtt('page')=='no'||$ctag->GetAtt('page')=='') echo " checked='1' "; ?> class='np' />否 </td></tr><tr><td><strong>默认值：</strong><br><span class="STYLE2"> 如果定义数据类型为select、radio、checkbox时，此处填写被选择的项目(用“,”分开，如“男,女,人妖”)，如果为联动选框，这里填写联动选框项目名称。</span></td><td><textarea name="vdefault" type="text" class="uk-textarea uk-form-small uk-form-width-large" id="vdefault" style="width:70%;height:60px"><?php echo $ctag->GetAtt('default'); ?></textarea></td></tr><tr><td><strong>最大长度：</strong><br><span class="STYLE2"> 文本数据必须填写，大于255为text类型 </span></td><td><input name="maxlength" type="text" class="uk-input uk-form-small uk-form-width-large" id="maxlength" value="<?php echo $ctag->GetAtt('maxlength')?>" style="width:80px;height:24px;padding-top:3px;"></td></tr><tr><td><strong>自定义表单HTML：</strong></td><td>自定义表单HTML用~name~表示提示文字，~form~表示表单元素<br> </td></tr><tr><td align="center"><br> </td><td><textarea name="vinnertext" cols="45" rows="5" id="vinnertext" class="uk-textarea uk-form-small uk-form-width-large" style="width:70%; height:120px;"><?php echo $ctag->GetInnerText(); ?></textarea></td></tr><!-- /选项 --></table></div></div><div class="uk-card-footer " ><div class="uk-padding-small" ><button type="submit" class="uk-button uk-button-small uk-button-primary">提交</button></div></div></div></form><!-- 列表底部 --><div class="bar-bottom uk-flex uk-light uk-flex-right"><div class="uk-button-group" style="margin-left: 50px;"></div><div class="e1e02">Copyright &copy; 2007-2020 <a href='http://www.dedecms.com' target='_blank'><u>DedeCMS</u></a>, 上海卓卓网络科技有限公司 (DesDev, Inc.)</div></div><!-- 列表底部 --><!-- JS FILES --><script src="{dede:global.cfg_assets_dir/}/pkg/uikit/js/uikit.min.js"></script><script src="{dede:global.cfg_assets_dir/}/pkg/uikit/js/uikit-icons.min.js"></script><script src="{dede:global.cfg_assets_dir/}/pkg/jquery/jquery.min.js"></script><script src="{dede:global.cfg_assets_dir/}/js/dede.manage.min.js"></script><script language="javascript">function GetFields(){var theform = document.form1;var itemname = theform.itemname.value;var fieldname = theform.fname.value;var dtype = theform.dtype.value;var isnull = theform.isnull.value;var vdefault = theform.vdefault.value;var maxlength = theform.maxlength.value;var vinnertext = theform.vinnertext.value;var spage = (theform.spage[0].checked ? theform.spage[0].value : theform.spage[1].value);var sisnull = (isnull==0 ? "false" : "true");var autofield = (theform.autofield[0].checked ? theform.autofield[0].value : theform.autofield[1].value);var islist = (theform.islist.checked ? 1 : 0);var notsend = (theform.notsend.checked ? 1 : 0);if(itemname==""){alert("表单提示名称不能为空！");theform.itemname.focus();return false;}if((dtype=="radio"||dtype=="select"||dtype=="checkbox") && vdefault==""){alert("你选择的select或radio、checkbox类型，必须默认值设置选择的项目（用逗号[,]分开）！");return false;}if(spage=="no") spage = "";revalue = "<field:"+fieldname+" itemname=\""+itemname+"\" autofield=\""+autofield+"\" notsend=\""+notsend+"\" type=\""+dtype+"\"";revalue += " isnull=\""+sisnull+"\" islist=\""+islist+"\" default=\""+vdefault+"\" ";revalue += " maxlength=\""+maxlength+"\" page=\""+spage+"\">\r\n"+vinnertext+"</field:"+fieldname+">\r\n";document.form1.fieldstring.value = revalue;return true;}</script><!-- / JS FILES --></body></html>