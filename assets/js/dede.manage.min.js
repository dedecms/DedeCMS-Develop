$(document).ready(function () {
  // 关闭菜单
  $(document.body).click(function (event) {
    window.parent.UIkit.dropdown("#allmenu").hide(0);
    window.parent.UIkit.dropdown("#fastmenu").hide(0);
  });
  // checkbox 全选或选取消
  $("#select-all").click(function (event) {
    if (this.checked) {
      $(":checkbox").prop("checked", true);
    } else {
      $(":checkbox").prop("checked", false);
    }
  });

  // 树形列表节点展开
  $(".dede-show-type").click(function () {
    if ($('#type_'+this.id).is('.uk-hidden')){
      $(this).attr("data-uk-icon","dash-square");
      $('#type_'+this.id).removeClass( "uk-hidden" );
    }else{
      $(this).attr("data-uk-icon","plus-square");
      $('#type_'+this.id).addClass( "uk-hidden" );
    }
  });

});



// 文章列表管理函数.
// 更新
function DedeCMS_JSCODE_Version_Checked_Archive_Update(aid = 0) {
  _DedeCMS_JSCODE_Version_Checked_CallControlURL(
    "archives_do.php?aid=" + aid + "&dopost=makeArchives"
  );
}

// 审核
function DedeCMS_JSCODE_Version_Checked_Archive_Review(aid = 0) {
  _DedeCMS_JSCODE_Version_Checked_CallControlURL(
    "archives_do.php?aid=" + aid + "&dopost=checkArchives"
  );
}

// 推荐
function DedeCMS_JSCODE_Version_Checked_Archive_Recommend(aid = 0) {
  _DedeCMS_JSCODE_Version_Checked_CallControlURL(
    "archives_do.php?aid=" + aid + "&dopost=commendArchives"
  );
}

// 还原所选项
function DedeCMS_JSCODE_Version_Checked_Archive_Revert(aid = 0) {
  _DedeCMS_JSCODE_Version_Checked_CallControlURL(
    "archives_do.php?aid=" + aid + "&dopost=return"
  );
}

// 删除
function DedeCMS_JSCODE_Version_Checked_Archive_Delete(aid = 0) {
  _DedeCMS_JSCODE_Version_Checked_CallControlURL(
    "archives_do.php?aid=" + aid + "&dopost=delArchives"
  );
}

// 倾倒回收站
function DedeCMS_JSCODE_Version_Checked_Archive_EmptyTrash(aid = 0) {
  _DedeCMS_JSCODE_Version_Checked_CallControlURL(
    "archives_do.php?aid=" + aid + "&dopost=del&recycle=1"
  );
}

// 移动
function DedeCMS_JSCODE_Version_Checked_Archive_Move(cid) {
  _DedeCMS_JSCODE_Version_Checked_CallControlModal(
    "archives_do.php?dopost=moveArchives&channelid=" + cid + "&rnd=" + Math.random()
  );
}

// 根据Checkbox选项打开功能弹窗
function _DedeCMS_JSCODE_Version_Checked_CallControlModal(url) {
  var qstr = _DedeCMS_JSCODE_Version_GetCheckboxItem();
  if (qstr == "") {
    alert("必须选择一个或多个文档！");
    return;
  } else {
    $.get(url + "&qstr=" + qstr, function () {
      $(".uk-modal-dialog").html("");
    })
      .done(function (data) {
        $(".uk-modal-dialog").html(data);
        UIkit.modal("#modal-overflow").show();
      })
      .fail(function () {
        alert("URL错误或丢失网络链接。");
      });
  }
}

// 根据Checkbox选项打开URL
function _DedeCMS_JSCODE_Version_Checked_CallControlURL(url) {
  var qstr = _DedeCMS_JSCODE_Version_GetCheckboxItem();
  if (qstr == "") {
    alert("必须选择一个或多个文档！");
  } else {
    location = url + "&qstr=" + qstr;
  }
}

//获得选中的内容
function _DedeCMS_JSCODE_Version_GetCheckboxItem() {
  var checkedVals = $(".check:checkbox:checked")
    .map(function () {
      return this.value;
    })
    .get();
  return checkedVals.join("`");
}

// END 文章列表管理函数 .